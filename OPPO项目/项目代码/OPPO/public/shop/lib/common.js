var isMobileRegex=/^1\d{10}$/;var isPasswordRegex=/^[0-9a-zA-Z]{6,16}$/;var isNameRegex=/^[0-9a-zA-Z\u4e00-\u9fa5]{2,12}$/;var isEmailRegex=/^([\w-_~`!#$%^&*{}.+]{3,20})+(\.[\w-]+)*@[\w-_]+((\.){1}([\w-_]+)+)+$/;var isCaptchaRegx=/^([0-9a-zA-Z\u4e00-\u9fa5])+$/;var isVercodeRegex=/^([0-9a-zA-Z])+$/;var isMibaoRegex=/^[0-9a-zA-Z\u4e00-\u9fa5]{2,20}$/;var k=0,len,cookieList;window.load_status=1;var xt1=null;var u=(function getData(){var b=window.location.href;if(b.indexOf("?")!=-1){var a=b.split("?")[1];var d=a.split("&");var e={};for(var c=0;c<d.length;c++){e[d[c].split("=")[0]]=d[c].split("=")[1]}return e}else{return{}}})();function showinfo(d,b,a){var c=$("#"+d);if(a==1){c.html(b).css("color","#ff5656")}else{if(a==2){c.html(b).css("color","#878b8a")}else{c.html(b).css("color","#666666")}}}function focus_func(a,b){$(a).next(".placeholder").css("display","none");var c=a.getAttribute("id");showinfo("info_"+c,b,2);$(a).parentsUntil(".pop_dlg").find(".error_tip1").html("")}function blur_func(a,b){if($(a).val()==""){$(a).next(".placeholder").css("display","block");var c=a.getAttribute("id");showinfo("info_"+c,b,1)}}function showDiv(a){a.css({"top":$(window).height()/2-a.height()/2+$(window.document).scrollTop()+"px","margin-left":$(window).width()/2-a.width()/2+$(window.document).scrollLeft()+"px","display":"block"});$(".mask").css({"height":$(document).height(),"width":$(document).width()}).show();$("#dlg_id").val(a.attr("id"))}function hideDiv(a){a.find("input[type='text']").val("");a.find("input[type='password']").val("");a.find(".placeholder").show();a.find(".error_tip").html("");a.find(".error_tip1").html("");a.hide();$("#dlg_id").val("");$(".mask").hide()}$(".ico_close").click(function(){var a=$(this).parent();hideDiv(a)});$("#timeout_btn").click(function(){hideDiv($("#timeout_dlg"))});$("#timeout_dlg1 .ico_close").click(function(){window.location.href=$("#loginUrl").val()});$("#expired_dlg .ico_close").click(function(){window.location.href=$("#loginUrl").val()});function showToast(a,b){$("#toast_content").html(b);showDiv(a);a.fadeOut(3000);$("#mask").fadeOut(3000);window.location.href=window.location.href}$("#reset_form").find(".login_button").click(function(){var c=$("#newpwd").val();var b=$("#repwd").val();if(c.length==0||($.trim(c)).length==0){showinfo("info_newpwd","请输入密码",1);return false}if(b.length==0||($.trim(b)).length==0){showinfo("info_repwd","请再次输入密码",1);return false}if(!c.match(isPasswordRegex)){showinfo("info_newpwd","密码格式错误",1);return false}if(!b.match(isPasswordRegex)){showinfo("info_repwd","密码格式错误",1);return false}if(c!=b){showinfo("info_repwd","两次密码不一致",1);return false}var a=$.md5(c);$.ajax({type:"POST",url:"findMe",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey").val()+'","password":"'+a+'"}',beforeSend:function(){},success:function(d){if(d.resultCode!=1001){if(d.resultCode==30001){showinfo("info_reset_form","新旧密码不能相同",1)}else{if(d.resultCode==4010){showDiv($("#timeout_dlg1"))}else{showinfo("info_reset_form",d.resultMsg,1)}}return}window.location.href="reset_success.jsp?type=1"},complete:function(d){},error:function(d){}})});$(".ico_edit").click(function(){if($("#third_status").val()=="1"){showDiv($("#safe_dlg1"));$("#auth_code_mobile3").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random());return}showDiv($("#modify_username"))});$("#newname").focus(function(){focus_func(this,"用户名为2-12位字母、数字或汉字")});$("#newname").blur(function(){if($(this).val()==""){$(this).next(".placeholder").css("display","block")}});$("#modify_username .confirm_btn").click(function(){var a=$.trim($("#newname").val());if(a.length==0){showinfo("info_newname","请输入用户名",1);return false}if(!a.match(isNameRegex)){showinfo("info_newname","用户名格式错误",1);return false}if(a.match(/^\d+$/)){showinfo("info_newname","不可为纯数字",1);return false}$.ajax({type:"POST",url:"../modifyUserName",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"userName" :"'+a+'"}',beforeSend:function(){},success:function(c){var b=c.resultCode;if(b!=1001){switch(b){case 2004:case 3002:showinfo("info_newname",c.resultDesc,1);break;case 3009:hideDiv($("#modify_username"));showinfo("info_newname","用户名为2-12位字母、数字或汉字",2);showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#modify_username"));showinfo("info_newname","用户名为2-12位字母、数字或汉字",2);showDiv($("#timeout_dlg"));break;default:showinfo("info_modify_username",c.resultDesc,1);break}return}hideDiv($("#modify_username"));showinfo("info_newname","用户名为2-12位字母、数字或汉字",2);showToast($("#success_toast"),"已成功设置用户名")},complete:function(b){},error:function(b){}})});$("#modify_username .cancel_btn").click(function(){hideDiv($("#modify_username"));showinfo("info_newname","用户名为2-12位字母、数字或汉字",2)});$("#modify_username .ico_close").click(function(){showinfo("info_newname","用户名为2-12位字母、数字或汉字",2)});$("#repwd1, #repwd,#resafepwd").focus(function(){focus_func(this,"密码包含6-16位字母、数字")});$("#repwd1, #repwd,#resafepwd").blur(function(){if($(this).val()==""){$(this).next(".placeholder").css("display","block")
}});$(".answer, .vercode,  #newpwd1, #oldpwd, #pwd, #new_mobile, #new_email, #newpwd,#safe_mobile,#safepwd").focus(function(){focus_func(this,"")});$(".answer, .vercode,  #newpwd1, #oldpwd, #pwd, #new_mobile, #new_email, #newpwd,#safe_mobile,#safepwd").blur(function(){blur_func(this,"")});function judgeType(){switch($("#securityType").val()){case"bindMobile":case"reBindMobile":showDiv($("#mobile_dlg1"));$("#auth_code_mobile1").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random());break;case"reBindEmail":case"bindEmail":showDiv($("#email_dlg1"));$("#auth_code_email1").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random());break;case"createProblem":case"modifyProblem":showDiv($("#mibao_dlg"));break}}$("#modify_pwd .ico_close").click(function(){showinfo("info_repwd1","密码包含6-16位字母、数字",2)});$("#modify_pwd .cancel_btn").click(function(){hideDiv($("#modify_pwd"));showinfo("info_repwd1","密码包含6-16位字母、数字",2)});var xh_relogin;function time_relogin(){var a=$("#time_span").html();a--;$("#time_span").html(a);xh_relogin=setTimeout(function(){time_relogin()},1000);if(a<1){clearTimeout(xh_relogin);window.location.href=$("#loginUrl").val()}}$("#relogin_dlg .ico_close").click(function(){if(xh_relogin!=null){clearTimeout(xh_relogin)}window.location.href=$("#loginUrl").val()});$("#relogin_btn").click(function(){if(xh_relogin!=null){clearTimeout(xh_relogin)}window.location.href=$("#loginUrl").val()});$("#modify_pwd .confirm_btn").click(function(){var a=$("#oldpwd").val();var c=$("#newpwd1").val();var b=$("#repwd1").val();if(a.length==0||($.trim(a)).length==0){showinfo("info_oldpwd","请输入原密码",1);return false}if(c.length==0||($.trim(c)).length==0){showinfo("info_newpwd1","请输入新密码",1);return false}if(b.length==0||($.trim(b)).length==0){showinfo("info_repwd1","请再次输入新密码",1);return false}if(!a.match(isPasswordRegex)){showinfo("info_oldpwd","密码格式错误",1);return false}if(!c.match(isPasswordRegex)){showinfo("info_newpwd1","密码格式错误",1);return false}if(!b.match(isPasswordRegex)){showinfo("info_repwd1","密码格式错误",1);return false}if(c!=b){showinfo("info_repwd1","新密码两次输入不一致",1);return false}if(a==c){showinfo("info_repwd1","新旧密码不能相同",1);return false}$.ajax({type:"POST",url:"../modifyPassWord",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"passwordOriginal" :"'+$.md5(a)+'","password":"'+$.md5(c)+'"}',beforeSend:function(){},success:function(e){var d=e.resultCode;if(d!=1001){switch(d){case 3008:showinfo("info_oldpwd","原密码错误",1);break;case 3009:hideDiv($("#modify_pwd"));showinfo("info_repwd1","密码包含6-16位字母、数字",2);showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#modify_pwd"));showinfo("info_repwd1","密码包含6-16位字母、数字",2);showDiv($("#timeout_dlg"));break;default:showinfo("info_modify_pwd",e.resultDesc,1);break}return}hideDiv($("#modify_pwd"));showinfo("info_repwd1","密码包含6-16位字母、数字",2);showDiv($("#relogin_dlg"));time_relogin()},complete:function(d){},error:function(d){}})});$("#changepwd .modify_btn").click(function(){if($("#third_status").val()=="1"){showDiv($("#safe_dlg1"));$("#auth_code_mobile3").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random());return}showDiv($("#modify_pwd"))});$("#changemibao .modify_btn").click(function(){$("#securityType").val($(this).attr("link"));var a=$("#username").val();$.ajax({type:"POST",url:"../account/getSafetyStatus",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"identify" :"'+a+'","securityType":"'+$("#securityType").val()+'"}',beforeSend:function(){},success:function(d){if(d.resultCode!=1001){if(d.resultCode==3009){showDiv($("#expired_dlg"))}else{if(d.resultCode==4010){showDiv($("#timeout_dlg"))}}return}var b=d.data;var c=b.protections;$("#requestKey_0").val(b.requestKey);if(c!=null&&c.length>0){$("#question0").html(b.protections[0]);$("#question1").html(b.protections[1]);$("#question2").html(b.protections[2]);showDiv($("#yz_mibao_dlg"))}},complete:function(b){},error:function(b){}})});$("#yz_mibao_dlg").find(".login_button").click(function(){var c=$.trim($("#answer0").val());var b=$.trim($("#answer1").val());var a=$.trim($("#answer2").val());if(c.length==0){showinfo("info_answer0","请输入答案",1);return false}if(!c.match(isMibaoRegex)){showinfo("info_answer0","答案格式错误",1);return false}if(b.length==0){showinfo("info_answer1","请输入答案",1);return false}if(!b.match(isMibaoRegex)){showinfo("info_answer1","答案格式错误",1);return false}if(a.length==0){showinfo("info_answer2","请输入答案",1);return false}if(!a.match(isMibaoRegex)){showinfo("info_answer2","答案格式错误",1);return false}$.ajax({type:"POST",url:"../account/checkByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_0").val()+'","answer0":"'+c+'","answer1":"'+b+'","answer2":"'+a+'","channelId":"3","securityType":"'+$("#securityType").val()+'"}',beforeSend:function(){},success:function(e){var d=e.resultCode;if(d!=1001){switch(d){case 3016:showinfo("info_yz_mibao_dlg","验证时间间隔太短",1);break;case 3017:showinfo("info_yz_mibao_dlg","今日验证身份次数达到上限",1);
break;case 3009:hideDiv($("#yz_mibao_dlg"));showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#yz_mibao_dlg"));showDiv($("#timeout_dlg"));break;default:showinfo("info_yz_mibao_dlg",e.resultDesc,1);break}return}$("#requestKey_2").val(e.data.requestKey);hideDiv($("#yz_mibao_dlg"));judgeType()},complete:function(d){},error:function(d){}})});$("#activate_btn").click(function(){$.ajax({type:"POST",url:"account/reSendMail",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:function(){},success:function(a){if(a.resultCode!=1001){return}showToast($("#success_toast"),"已发送验证邮件至您的邮箱，请于24小时内前往邮箱进行操作")}})});$("#changemobile .row_right,#changeemail .set_btn, #changeemail .modify_btn ,#changemibao .set_btn").click(function(){if($("#third_status").val()=="1"){showDiv($("#safe_dlg1"));$("#auth_code_mobile3").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random());return}$("#securityType").val($(this).attr("link"));var a=$("#username").val();$.ajax({type:"POST",url:"../account/getSafetyStatus",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"identify" :"'+a+'","securityType":"'+$("#securityType").val()+'"}',beforeSend:function(){},success:function(f){if(f.resultCode!=1001){if(f.resultCode==3009){showDiv($("#expired_dlg"))}else{if(f.resultCode==4010){showDiv($("#timeout_dlg"))}}return}var b=f.data;var g=b.userId;var e=b.mobile;var d=b.email;var c=b.protections;$("#requestKey_0").val(b.requestKey);if(e!==null){$("#phoneNum").html(e);$("#phoneNum1").html(e);$("#yz_email_dlg").find(".other_way").eq(0).show();if(d==null){$("#yz_sms_dlg").find(".other_way").eq(0).hide()}else{$("#yz_sms_dlg").find(".other_way").eq(0).show();$("#email").html(d);$("#email1").html(d)}if(c==null||c.length==0){$("#yz_sms_dlg").find(".other_way").eq(1).hide();$("#yz_email_dlg").find(".other_way").eq(1).hide()}else{$("#yz_sms_dlg").find(".other_way").eq(1).show();$("#yz_email_dlg").find(".other_way").eq(1).show();$("#question0").html(b.protections[0]);$("#question1").html(b.protections[1]);$("#question2").html(b.protections[2])}showDiv($("#yz_sms_dlg"))}else{$("#yz_email_dlg").find(".other_way").eq(0).hide();if(d!==null){$("#email").html(d);$("#email1").html(d);if(c==null||c.length==0){$("#yz_email_dlg").find(".other_way").eq(1).hide()}else{$("#yz_email_dlg").find(".other_way").eq(1).show();$("#question0").html(b.protections[0]);$("#question1").html(b.protections[1]);$("#question2").html(b.protections[2])}showDiv($("#yz_email_dlg"))}else{if(c!=null&&c.length>0){$("#question0").html(b.protections[0]);$("#question1").html(b.protections[1]);$("#question2").html(b.protections[2]);showDiv($("#yz_mibao_dlg"))}else{showDiv($("#yz_pwd_dlg"))}}}},complete:function(b){},error:function(b){}})});$("#yz_pwd_dlg .login_button").click(function(){var a=$("#pwd").val();if(a.length==0||$.trim(a).length==0){showinfo("info_pwd","请输入密码",1);return false}$.ajax({type:"POST",url:"../account/verifyByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_0").val()+'","channelId":"4","securityType":"'+$("#securityType").val()+'","password":"'+$.md5(a)+'"}',beforeSend:function(){},success:function(c){var b=c.resultCode;if(c.resultCode!=1001){switch(b){case 3008:case 2008:showinfo("info_pwd",c.resultDesc,1);break;case 3016:showinfo("info_yz_pwd_dlg","验证时间间隔太短",1);break;case 3017:showinfo("info_yz_pwd_dlg","今日验证身份次数达到上限",1);break;case 3009:hideDiv($("#yz_pwd_dlg"));showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#yz_pwd_dlg"));showDiv($("#timeout_dlg"));break;default:showinfo("info_yz_pwd_dlg",c.resultDesc,1);break}return}$("#requestKey_2").val(c.data.requestKey);hideDiv($("#yz_pwd_dlg"));judgeType()},complete:function(b){},error:function(b){}})});$("#yz_sms_dlg").find(".login_button").click(function(){$.ajax({type:"POST",url:"../account/verifyByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_0").val()+'","channelId":"1","securityType":"'+$("#securityType").val()+'"}',beforeSend:function(){},success:function(b){var a=b.resultCode;if(a!=1001){switch(a){case 3017:showinfo("info_yz_sms_dlg","今日发送短信次数达到上限",1);break;case 3016:showinfo("info_yz_sms_dlg","验证时间间隔太短",1);break;case 3009:hideDiv($("#yz_sms_dlg"));showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#yz_sms_dlg"));showDiv($("#timeout_dlg"));break;default:showinfo("info_yz_sms_dlg",b.resultDesc,1);break}return}$("#requestKey_1").val(b.data.requestKey);hideDiv($("#yz_sms_dlg"));showDiv($("#yz_sms_dlg1"));time_mobile1()},complete:function(a){},error:function(a){}})});$("#yz_sms_dlg1").find(".login_button").click(function(){var a=$("#vercode2").val();if(a.length==0||($.trim(a)).length==0){showinfo("info_vercode2","请输入验证码",1);return false}if(!a.match(isVercodeRegex)){showinfo("info_vercode2","验证码错误",1);return false}$.ajax({type:"POST",url:"../account/checkByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_1").val()+'","activationCode":"'+a+'","channelId":"1"}',beforeSend:function(){},success:function(c){var b=c.resultCode;
if(b!=1001){switch(b){case 2009:showinfo("info_vercode2","验证码错误",1);break;case 3016:showinfo("info_yz_sms_dlg1","验证时间间隔太短",1);break;case 3017:showinfo("info_yz_sms_dlg1","今日发送邮件次数达到上限",1);break;case 3009:document.getElementById("btn_verify_mobile1").innerHTML="<span id='time_mobile1'>60</span>S";document.getElementById("btn_verify_mobile1").className="btn_verify_unedit";document.getElementById("btn_verify_mobile1").setAttribute("onclick","");if(xh_mobile1!=null){clearTimeout(xh_mobile1)}hideDiv($("#yz_sms_dlg1"));showDiv($("#expired_dlg"));break;case 4010:document.getElementById("btn_verify_mobile1").innerHTML="<span id='time_mobile1'>60</span>S";document.getElementById("btn_verify_mobile1").className="btn_verify_unedit";document.getElementById("btn_verify_mobile1").setAttribute("onclick","");if(xh_mobile1!=null){clearTimeout(xh_mobile1)}hideDiv($("#yz_sms_dlg1"));showDiv($("#timeout_dlg"));break;default:showinfo("info_yz_sms_dlg1",c.resultDesc,1);break}return}$("#requestKey_2").val(c.data.requestKey);document.getElementById("btn_verify_mobile1").innerHTML="<span id='time_mobile1'>60</span>S";document.getElementById("btn_verify_mobile1").className="btn_verify_unedit";document.getElementById("btn_verify_mobile1").setAttribute("onclick","");if(xh_mobile1!=null){clearTimeout(xh_mobile1)}hideDiv($("#yz_sms_dlg1"));judgeType()},complete:function(b){},error:function(b){}})});$("#yz_email_dlg").find(".login_button").click(function(){$.ajax({type:"POST",url:"../account/verifyByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_0").val()+'","channelId":"2","securityType":"'+$("#securityType").val()+'"}',beforeSend:function(){},success:function(b){var a=b.resultCode;if(a!=1001){switch(a){case 3016:showinfo("info_yz_email_dlg","验证时间间隔太短",1);break;case 3017:showinfo("info_yz_email_dlg","今日发送邮件次数达到上限",1);break;case 3009:hideDiv($("#yz_email_dlg"));showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#yz_email_dlg"));showDiv($("#timeout_dlg"));break;default:showinfo("info_yz_email_dlg",b.resultDesc,1);break}return}$("#requestKey_1").val(b.data.requestKey);hideDiv($("#yz_email_dlg"));showDiv($("#yz_email_dlg1"));time_email1()},complete:function(a){},error:function(a){}})});$("#yz_email_dlg1").find(".login_button").click(function(){var a=$.trim($("#vercode3").val());if(a.length==0){showinfo("info_vercode3","请输入验证码",1);return false}if(!a.match(isVercodeRegex)){showinfo("info_vercode3","验证码错误",1);return false}$.ajax({type:"POST",url:"../account/checkByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_1").val()+'","activationCode":"'+a+'","channelId":"2"}',beforeSend:function(){},success:function(c){var b=c.resultCode;if(b!=1001){switch(b){case 2009:showinfo("info_vercode3","验证码错误",1);break;case 3016:showinfo("info_yz_email_dlg1","验证时间间隔太短",1);break;case 3017:showinfo("info_yz_email_dlg1","今日发送邮件次数达到上限",1);break;case 3009:document.getElementById("btn_verify_email1").innerHTML="<span id='time_email1'>60</span>S";document.getElementById("btn_verify_email1").className="btn_verify_unedit";document.getElementById("btn_verify_email1").setAttribute("onclick","");if(xh_email1!=null){clearTimeout(xh_email1)}hideDiv($("#yz_email_dlg1"));showDiv($("#expired_dlg"));break;case 4010:document.getElementById("btn_verify_email1").innerHTML="<span id='time_email1'>60</span>S";document.getElementById("btn_verify_email1").className="btn_verify_unedit";document.getElementById("btn_verify_email1").setAttribute("onclick","");if(xh_email1!=null){clearTimeout(xh_email1)}hideDiv($("#yz_email_dlg1"));showDiv($("#timeout_dlg"));break;default:showinfo("info_yz_email_dlg1",c.resultDesc,1);break}return}$("#requestKey_2").val(c.data.requestKey);document.getElementById("btn_verify_email1").innerHTML="<span id='time_email1'>60</span>S";document.getElementById("btn_verify_email1").className="btn_verify_unedit";document.getElementById("btn_verify_email1").setAttribute("onclick","");if(xh_email1!=null){clearTimeout(xh_email1)}hideDiv($("#yz_email_dlg1"));judgeType()},complete:function(b){},error:function(b){}})});function get_code_mobile1(){$("#auth_code_mobile1").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random())}function get_code_email1(){$("#auth_code_email1").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random())}$(document).on("click","#auth_code_mobile1",function(){get_code_mobile1()});$(document).on("click","#auth_code_email1",function(){get_code_email1()});$(document).on("click","#auth_code_mobile3",function(){$("#auth_code_mobile3").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random())});var xh_mobile1;var xh_email1;var xh_mobile2;function time_mobile1(){var a=$("#time_mobile1").html();a--;$("#time_mobile1").html(a);xh_mobile1=setTimeout(function(){time_mobile1()},1000);if(a<1){clearTimeout(xh_mobile1);$("#btn_verify_mobile1").html("重新获取");document.getElementById("btn_verify_mobile1").className="btn_verify";
document.getElementById("btn_verify_mobile1").setAttribute("onclick","send_verify_mobile1()")}}$("#yz_sms_dlg1 .ico_close").click(function(){document.getElementById("btn_verify_mobile1").innerHTML="<span id='time_mobile1'>60</span>S";document.getElementById("btn_verify_mobile1").className="btn_verify_unedit";document.getElementById("btn_verify_mobile1").setAttribute("onclick","");if(xh_mobile1!=null){clearTimeout(xh_mobile1)}});function send_verify_mobile1(){showinfo("info_yz_sms_dlg1","",1);document.getElementById("btn_verify_mobile1").innerHTML="<span id='time_mobile1'>60</span>S";document.getElementById("btn_verify_mobile1").className="btn_verify_unedit";document.getElementById("btn_verify_mobile1").setAttribute("onclick","");time_mobile1();$.ajax({type:"POST",url:"../account/verifyByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_0").val()+'","channelId":"1","securityType":"'+$("#securityType").val()+'"}',beforeSend:function(){},success:function(b){var a=b.resultCode;if(a!=1001){switch(a){case 2009:showinfo("info_yz_sms_dlg1","验证码错误",1);break;case 3016:showinfo("info_yz_sms_dlg1","验证时间间隔太短",1);break;case 3017:showinfo("info_yz_sms_dlg1","今日发送短信次数达到上限",1);break;case 3009:document.getElementById("btn_verify_mobile1").innerHTML="<span id='time_mobile1'>60</span>S";document.getElementById("btn_verify_mobile1").className="btn_verify_unedit";document.getElementById("btn_verify_mobile1").setAttribute("onclick","");if(xh_mobile1!=null){clearTimeout(xh_mobile1)}hideDiv($("#yz_sms_dlg1"));showDiv($("#expired_dlg"));break;case 4010:document.getElementById("btn_verify_mobile1").innerHTML="<span id='time_mobile1'>60</span>S";document.getElementById("btn_verify_mobile1").className="btn_verify_unedit";document.getElementById("btn_verify_mobile1").setAttribute("onclick","");if(xh_mobile1!=null){clearTimeout(xh_mobile1)}hideDiv($("#yz_sms_dlg1"));showDiv($("#timeout_dlg"));break;default:showinfo("info_yz_sms_dlg1",b.resultDesc,1);break}return}$("#requestKey_1").val(b.data.requestKey)},complete:function(a){},error:function(a){}})}function time_mobile2(){var a=$("#time_mobile2").html();a--;$("#time_mobile2").html(a);xh_mobile2=setTimeout(function(){time_mobile2()},1000);if(a<1){clearTimeout(xh_mobile2);$("#btn_verify_mobile2").html("重新获取");document.getElementById("btn_verify_mobile2").className="btn_verify";document.getElementById("btn_verify_mobile2").setAttribute("onclick","send_verify_mobile2()")}}$("#mobile_dlg2 .ico_close").click(function(){document.getElementById("btn_verify_mobile2").innerHTML="<span id='time_mobile2'>60</span>S";document.getElementById("btn_verify_mobile2").className="btn_verify_unedit";document.getElementById("btn_verify_mobile2").setAttribute("onclick","");if(xh_mobile2!=null){clearTimeout(xh_mobile2)}});function send_verify_mobile2(){showinfo("info_mobile_dlg2","",1);document.getElementById("btn_verify_mobile2").innerHTML="<span id='time_mobile2'>60</span>S";document.getElementById("btn_verify_mobile2").className="btn_verify_unedit";document.getElementById("btn_verify_mobile2").setAttribute("onclick","");time_mobile2();$.ajax({type:"POST",url:"../account/verifyByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_2").val()+'","mobile" :"'+$("#new_phoneNum").html()+'","channelId":"1","securityType":"'+$("#securityType").val()+'"}',beforeSend:function(){},success:function(b){var a=b.resultCode;if(a!=1001){switch(a){case 2009:showinfo("info_mobile_dlg2","验证码错误",1);break;case 3016:showinfo("info_mobile_dlg2","验证时间间隔太短",1);break;case 3017:showinfo("info_mobile_dlg2","今日发送短信次数达到上限",1);break;case 3009:document.getElementById("btn_verify_mobile2").innerHTML="<span id='time_mobile2'>60</span>S";document.getElementById("btn_verify_mobile2").className="btn_verify_unedit";document.getElementById("btn_verify_mobile2").setAttribute("onclick","");if(xh_mobile2!=null){clearTimeout(xh_mobile2)}hideDiv($("#mobile_dlg2"));showDiv($("#expired_dlg"));break;case 4010:document.getElementById("btn_verify_mobile2").innerHTML="<span id='time_mobile2'>60</span>S";document.getElementById("btn_verify_mobile2").className="btn_verify_unedit";document.getElementById("btn_verify_mobile2").setAttribute("onclick","");if(xh_mobile2!=null){clearTimeout(xh_mobile2)}hideDiv($("#mobile_dlg2"));showDiv($("#timeout_dlg"));break;default:showinfo("info_mobile_dlg2",b.resultDesc,1);break}return}$("#requestKey_3").val(b.data.requestKey)},complete:function(a){},error:function(a){}})}function time_email1(){var a=$("#time_email1").html();a--;$("#time_email1").html(a);xh_email1=setTimeout(function(){time_email1()},1000);if(a<1){clearTimeout(xh_email1);$("#btn_verify_email1").html("重新获取");document.getElementById("btn_verify_email1").className="btn_verify";document.getElementById("btn_verify_email1").setAttribute("onclick","send_verify_email1()")}}$("#yz_email_dlg1 .ico_close").click(function(){document.getElementById("btn_verify_email1").innerHTML="<span id='time_email1'>60</span>S";
document.getElementById("btn_verify_email1").className="btn_verify_unedit";document.getElementById("btn_verify_email1").setAttribute("onclick","");if(xh_email1!=null){clearTimeout(xh_email1)}});function send_verify_email1(){showinfo("info_yz_email_dlg1","",1);document.getElementById("btn_verify_email1").innerHTML="<span id='time_email1'>60</span>S";document.getElementById("btn_verify_email1").className="btn_verify_unedit";document.getElementById("btn_verify_email1").setAttribute("onclick","");time_email1();$.ajax({type:"POST",url:"../account/verifyByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_0").val()+'","channelId":"2","securityType":"'+$("#securityType").val()+'"}',beforeSend:function(){},success:function(a){if(a.resultCode!=1001){if(a.resultCode==3009){document.getElementById("btn_verify_email1").innerHTML="<span id='time_email1'>60</span>S";document.getElementById("btn_verify_email1").className="btn_verify_unedit";document.getElementById("btn_verify_email1").setAttribute("onclick","");if(xh_email1!=null){clearTimeout(xh_email1)}hideDiv($("#yz_email_dlg1"));showDiv($("#expired_dlg"));return}else{if(a.resultCode==4010){document.getElementById("btn_verify_email1").innerHTML="<span id='time_email1'>60</span>S";document.getElementById("btn_verify_email1").className="btn_verify_unedit";document.getElementById("btn_verify_email1").setAttribute("onclick","");if(xh_email1!=null){clearTimeout(xh_email1)}hideDiv($("#yz_email_dlg1"));showDiv($("#timeout_dlg"));return}}showinfo("info_yz_email_dlg1",a.resultDesc,1);return}$("#requestKey_1").val(a.data.requestKey)},complete:function(a){},error:function(a){}})}$("#mobile_dlg1 .login_button").click(function(){var b=$("#new_mobile").val();var a=$("#vercode_mobile1").val();if(b.length==0||($.trim(b)).length==0){showinfo("info_new_mobile","请输入手机号码",1);return false}if(!b.match(isMobileRegex)){showinfo("info_new_mobile","手机号码格式错误",1);return false}if(a.length==0||($.trim(a)).length==0){showinfo("info_vercode_mobile1","请输入验证码",1);return false}if(!a.match(isCaptchaRegx)){showinfo("info_vercode_mobile1","验证码错误",1);return false}$.ajax({type:"POST",url:"../account/verifyByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_2").val()+'","channelId":"1","securityType":"'+$("#securityType").val()+'","mobile" :"'+b+'","activationCode" :"'+a+'"}',beforeSend:function(){},success:function(d){var c=d.resultCode;if(c!=1001){switch(c){case 2009:showinfo("info_vercode_mobile1","验证码错误",1);break;case 3004:showinfo("info_new_mobile","此手机号已被绑定",1);break;case 3016:showinfo("info_mobile_dlg1","验证时间间隔太短",1);break;case 3017:showinfo("info_mobile_dlg1","今日发送短信次数达到上限",1);break;case 3009:hideDiv($("#mobile_dlg1"));showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#mobile_dlg1"));showDiv($("#timeout_dlg"));break;default:showinfo("info_mobile_dlg1",d.resultDesc,1);break}$("#auth_code_mobile1").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random());return}$("#requestKey_3").val(d.data.requestKey);hideDiv($("#mobile_dlg1"));$("#new_phoneNum").html($.trim(b));showDiv($("#mobile_dlg2"));time_mobile2()},complete:function(c){},error:function(c){}})});$("#mobile_dlg2 .login_button").click(function(){var a=$("#vercode_mobile2").val();if(a.length==0||$.trim(a).length==0){showinfo("info_vercode_mobile2","请输入验证码",1);return false}if(!a.match(isVercodeRegex)){showinfo("info_vercode_mobile2","验证码错误",1);return false}$.ajax({type:"POST",url:"../bind/changeBindMobile",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_3").val()+'","activationCode" :"'+a+'"}',beforeSend:function(){},success:function(c){var b=c.resultCode;if(b!=1001){switch(b){case 2009:showinfo("info_vercode_mobile2","验证码错误",1);break;case 3016:showinfo("info_mobile_dlg2","验证时间间隔太短",1);break;case 3017:showinfo("info_mobile_dlg2","今日发送短信次数达到上限",1);break;case 3009:document.getElementById("btn_verify_mobile2").innerHTML="<span id='time_mobile2'>60</span>S";document.getElementById("btn_verify_mobile2").className="btn_verify_unedit";document.getElementById("btn_verify_mobile2").setAttribute("onclick","");if(xh_mobile2!=null){clearTimeout(xh_mobile2)}hideDiv($("#mobile_dlg2"));showDiv($("#expired_dlg"));break;case 4010:document.getElementById("btn_verify_mobile2").innerHTML="<span id='time_mobile2'>60</span>S";document.getElementById("btn_verify_mobile2").className="btn_verify_unedit";document.getElementById("btn_verify_mobile2").setAttribute("onclick","");if(xh_mobile2!=null){clearTimeout(xh_mobile2)}hideDiv($("#mobile_dlg2"));showDiv($("#timeout_dlg"));break;default:showinfo("info_mobile_dlg2",c.resultDesc,1);break}return}document.getElementById("btn_verify_mobile2").innerHTML="<span id='time_mobile2'>60</span>S";document.getElementById("btn_verify_mobile2").className="btn_verify_unedit";document.getElementById("btn_verify_mobile2").setAttribute("onclick","");
if(xh_mobile2!=null){clearTimeout(xh_mobile2)}hideDiv($("#mobile_dlg2"));showToast($("#success_toast"),"已成功绑定安全手机")},complete:function(b){},error:function(b){}})});$("#email_dlg1").find(".login_button").click(function(){var b=$("#new_email").val();if(b.length==0||$.trim(b).length==0){showinfo("info_new_email","请输入邮箱地址",1);return false}if(!b.match(isEmailRegex)){showinfo("info_new_email","邮箱格式错误",1);return false}var a=$("#vercode_email1").val();if(a.length==0||($.trim(a)).length==0){showinfo("info_vercode_email1","请输入验证码",1);return false}if(!a.match(isCaptchaRegx)){showinfo("info_vercode_email1","验证码错误",1);return false}$.ajax({type:"POST",url:"../account/verifyByChannel",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_2").val()+'","channelId":"5","securityType":"'+$("#securityType").val()+'","email" :"'+b+'","activationCode" :"'+a+'"}',beforeSend:function(){},success:function(d){var c=d.resultCode;if(c!=1001){switch(c){case 2009:showinfo("info_vercode_email1","验证码错误",1);break;case 3003:showinfo("info_new_email","此邮箱已被绑定",1);break;case 3016:showinfo("info_email_dlg1","验证时间间隔太短",1);break;case 3017:showinfo("info_email_dlg1","今日发送邮件次数已达上限",1);break;case 3009:hideDiv($("#email_dlg1"));showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#email_dlg1"));showDiv($("#timeout_dlg"));break;default:showinfo("info_email_dlg1",d.resultDesc,1);break}$("#auth_code_email1").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random());return}$("#requestKey_3").val(d.data.requestKey);hideDiv($("#email_dlg1"));showDiv($("#email_dlg2"))},complete:function(c){},error:function(c){}})});$("#email_dlg2").find(".login_button").click(function(){hideDiv($("#email_dlg2"))});$("#pwd").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#yz_pwd_dlg .login_button").click()}});$("#new_mobile,#vercode_mobile1").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#mobile_dlg1 .login_button").click()}});$("#vercode_mobile2").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#mobile_dlg2 .login_button").click()}});$("#new_email,#vercode_email1").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#email_dlg1 .login_button").click()}});$("#vercode_email2").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#email_dlg2 .login_button").click()}});$("#setanswer0,#setanswer1,#setanswer2").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#mibao_dlg .login_button").click()}});$("#yz_sms_dlg1 #vercode2").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#yz_sms_dlg1 .login_button").click()}});$("#yz_email_dlg1 #vercode3").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#yz_email_dlg1 .login_button").click()}});$("#yz_mibao_dlg #answer0, #yz_mibao_dlg #answer1, #yz_mibao_dlg #answer2").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#yz_mibao_dlg .login_button").click()}});$("#set_pwd_dlg  #newpwd, #set_pwd_dlg #repwd").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#set_pwd_dlg .confirm_btn").click()}});$("#modify_pwd  #newpwd1, #modify_pwd #repwd1, #modify_pwd #oldpwd").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#modify_pwd .confirm_btn").click()}});$("#reset_form  #newpwd, #reset_form #repwd").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#reset_form .login_button").click()}});$("#modify_username  #newname").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#modify_username .confirm_btn").click()}});$("#safe_mobile,#vercode_mobile3").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#safe_dlg1 .login_button").click()}});$("#vercode_mobile4").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#safe_dlg2 .login_button").click()}});$("#safepwd,#resafepwd").keypress(function(b){var a=b.which;if(a===13){b.preventDefault();$("#safe_dlg3 .login_button").click()}});$("#mibao_dlg .login_button").click(function(){if($("#new_question0").html()=="选择密保问题一"){showinfo("info_setanswer0","选择密保问题",1);return false}if($("#new_question1").html()=="选择密保问题二"){showinfo("info_setanswer1","选择密保问题",1);return false}if($("#new_question2").html()=="选择密保问题三"){showinfo("info_setanswer2","选择密保问题",1);return false}var d=$.trim($("#setanswer0").val());var c=$.trim($("#setanswer1").val());var b=$.trim($("#setanswer2").val());if(d.length==0){showinfo("info_setanswer0","请输入答案",1);return false}if(!d.match(isMibaoRegex)){showinfo("info_setanswer0","答案格式错误",1);return false}if(c.length==0){showinfo("info_setanswer1","请输入答案",1);return false}if(!c.match(isMibaoRegex)){showinfo("info_setanswer1","答案格式错误",1);return false}if(b.length==0){showinfo("info_setanswer2","请输入答案",1);return false}if(!b.match(isMibaoRegex)){showinfo("info_setanswer2","答案格式错误",1);return false}var a="";if($("#securityType").val()=="modifyProblem"){a="modifyProblem"}else{a="createProblem"
}$.ajax({type:"POST",url:"../"+a,cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey_2").val()+'","question0" :"'+$("#new_question0").html()+'","question1" :"'+$("#new_question1").html()+'","question2" :"'+$("#new_question2").html()+'","answer0" :"'+d+'","answer1" :"'+c+'","answer2" :"'+b+'"}',beforeSend:function(){},success:function(f){var e=f.resultCode;if(e!=1001){switch(e){case 3016:showinfo("info_mibao_dlg","验证时间间隔太短",1);break;case 3017:showinfo("info_mibao_dlg","今日验证身份次数达到上限",1);break;case 3009:hideDiv($("#mibao_dlg"));showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#mibao_dlg"));showDiv($("#timeout_dlg"));break;default:showinfo("info_mibao_dlg",f.resultDesc,1);break}return}hideDiv($("#mibao_dlg"));if($("#securityType").val()=="modifyProblem"){showToast($("#success_toast"),"已成功修改密保")}else{showToast($("#success_toast"),"已成功设置密保")}},complete:function(e){},error:function(e){}})});$("#mibao_dlg .ico_close").click(function(){$("#new_question0").html("选择密保问题一");$("#new_question1").html("选择密保问题二");$("#new_question2").html("选择密保问题三");$("#question_list li").show();document.getElementById("question_list").scrollTop=0;$("#question_list").hide();$("#new_question0").attr("index","");$("#new_question1").attr("index","");$("#new_question2").attr("index","")});window.onresize=function(){$(".mask").css({"height":$(document).height(),"width":$(document).width()});var b=$("#dlg_id").val();if(b!=""){var c=$("#"+b);c.css({"top":$(window).height()/2-c.height()/2+$(window.document).scrollTop()+"px","margin-left":$(window).width()/2-220+$(window.document).scrollLeft()+"px"})}if(document.getElementById("question_list")&&document.getElementById("question_list").style.display=="block"){var a=$("#question_id").val();document.getElementById("question_list").style.top=$("#"+a).offset().top+45+"px"}};$(".quit_link").click(function(){$.ajax({type:"POST",url:"../logout",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:function(){},success:function(c){if(c.resultCode!=1001){return}if(c.data!=null&&c.data.length>0){showDiv($("#quit_toast"));len=c.data.length;cookieList=c.data;var b=cookieList[k++]+"&jsonpCallback= logoutCallback&_="+new Date().getTime();var a=document.createElement("script");a.src=b;document.getElementsByTagName("head")[0].appendChild(a);if(xt1!=null){clearTimeout(xt1)}xt1=setTimeout(function(){notResponse()},5000);window.load_status=0}else{if(u.callback){window.location.href=decodeURIComponent(u.callback)}else{window.location.href=$("#loginUrl").val()}}}})});function setCookie(){if(k<len){var b=cookieList[k++]+"&jsonpCallback= logoutCallback&_="+new Date().getTime();var a=document.createElement("script");a.src=b;document.getElementsByTagName("head")[0].appendChild(a);if(xt1!=null){clearTimeout(xt1)}xt1=setTimeout(function(){notResponse()},5000);window.load_status=0}else{if(xt1!=null){clearTimeout(xt1)}if(u.callback){window.location.href=decodeURIComponent(u.callback)}else{window.location.href=$("#loginUrl").val()}}}function notResponse(){clearTimeout(xt1);if(window.load_status==0){window.load_status=1;setCookie()}}function logoutCallback(a){window.load_status=1;setCookie()}var xh_mobile4;function time_mobile4(){var a=$("#time_mobile4").html();a--;$("#time_mobile4").html(a);xh_mobile4=setTimeout(function(){time_mobile4()},1000);if(a<1){clearTimeout(xh_mobile4);$("#btn_verify_mobile4").html("重新获取");document.getElementById("btn_verify_mobile4").className="btn_verify";document.getElementById("btn_verify_mobile4").setAttribute("onclick","send_verify_mobile4()")}}$("#safe_dlg2 .ico_close").click(function(){document.getElementById("btn_verify_mobile4").innerHTML="<span id='time_mobile4'>60</span>S";document.getElementById("btn_verify_mobile4").className="btn_verify_unedit";document.getElementById("btn_verify_mobile4").setAttribute("onclick","");if(xh_mobile4!=null){clearTimeout(xh_mobile4)}});function send_verify_mobile4(){showinfo("info_safe_dlg2","",1);document.getElementById("btn_verify_mobile4").innerHTML="<span id='time_mobile4'>60</span>S";document.getElementById("btn_verify_mobile4").className="btn_verify_unedit";document.getElementById("btn_verify_mobile4").setAttribute("onclick","");time_mobile4();$.ajax({type:"POST",url:"../bind/retrySms",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"requestKey" :"'+$("#requestKey").val()+'","mobile" :"'+$("#safe_phoneNum").html()+'","channelId":"1"}',beforeSend:function(){},success:function(b){var a=b.resultCode;if(a!=1001){switch(a){case 2009:showinfo("info_vercode_mobile4","验证码错误",1);break;case 3016:showinfo("info_safe_dlg2","验证时间间隔太短",1);break;case 3017:showinfo("info_safe_dlg2","今日发送短信次数达到上限",1);break;case 3009:document.getElementById("btn_verify_mobile4").innerHTML="<span id='time_mobile4'>60</span>S";document.getElementById("btn_verify_mobile4").className="btn_verify_unedit";document.getElementById("btn_verify_mobile4").setAttribute("onclick","");
if(xh_mobile4!=null){clearTimeout(xh_mobile4)}hideDiv($("#safe_dlg2"));showDiv($("#expired_dlg"));break;case 4010:document.getElementById("btn_verify_mobile4").innerHTML="<span id='time_mobile4'>60</span>S";document.getElementById("btn_verify_mobile4").className="btn_verify_unedit";document.getElementById("btn_verify_mobile4").setAttribute("onclick","");if(xh_mobile4!=null){clearTimeout(xh_mobile4)}hideDiv($("#safe_dlg2"));showDiv($("#timeout_dlg"));break;default:showinfo("info_safe_dlg2",b.resultMsg,1);break}return}},complete:function(a){},error:function(a){}})}$("#safe_dlg1 .login_button").click(function(){var b=$.trim($("#safe_mobile").val());if(b.length==0){showinfo("info_safe_mobile","请输入手机号码",1);return false}if(!b.match(isMobileRegex)){showinfo("info_safe_mobile","手机号码格式错误",1);return false}var a=$.trim($("#vercode_mobile3").val());if(a.length==0){showinfo("info_vercode_mobile3","请输入验证码",1);return false}if(!a.match(isCaptchaRegx)){showinfo("info_vercode_mobile3","验证码错误",1);return false}$.ajax({type:"POST",url:"../bind/sms",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"mobile" :"'+b+'","captcha":"'+a+'"}',beforeSend:function(){},success:function(f){var e=f.resultCode;var d=f.resultMsg;if(e!=1001){switch(e){case 2009:showinfo("info_vercode_mobile3","验证码错误",1);break;case 3004:showinfo("info_safe_mobile","手机号已注册",1);break;case 3016:showinfo("info_vercode_mobile3","验证时间间隔太短",1);break;case 3017:showinfo("info_vercode_mobile3","今日验证次数已达上限",1);break;case 3009:hideDiv($("#safe_dlg1"));showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#safe_dlg1"));showDiv($("#timeout_dlg"));break;default:showinfo("info_safe_dlg1",d,1);break}$("#auth_code_mobile3").attr("src",$("#captchaUrl").val()+"?vertion="+Math.random());return}$("#safe_phoneNum").html(b);var c=f.data;$("#requestKey").val(c.requestKey);time_mobile4();hideDiv($("#safe_dlg1"));showDiv($("#safe_dlg2"))}})});$("#safe_dlg2 .login_button").click(function(){var a=$.trim($("#vercode_mobile4").val());if(a.length==0){showinfo("info_vercode_mobile4","请输入验证码",1);return false}if(!a.match(isVercodeRegex)){showinfo("info_vercode_mobile4","验证码错误",1);return false}$.ajax({type:"POST",url:"../bind/validate",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:'{"mobile" :"'+$("#safe_phoneNum").html()+'","authCode":"'+a+'","requestKey":"'+$("#requestKey").val()+'"}',beforeSend:function(){},success:function(c){var b=c.resultCode;if(b!=1001){switch(b){case 2009:showinfo("info_vercode_mobile4","验证码错误",1);break;case 3016:showinfo("info_safe_dlg2","验证时间间隔太短",1);break;case 3017:showinfo("info_safe_dlg2","今日验证次数已达上限",1);break;case 3009:document.getElementById("btn_verify_mobile4").innerHTML="<span id='time_mobile4'>60</span>S";document.getElementById("btn_verify_mobile4").className="btn_verify_unedit";document.getElementById("btn_verify_mobile4").setAttribute("onclick","");if(xh_mobile4!=null){clearTimeout(xh_mobile4)}hideDiv($("#safe_dlg2"));showDiv($("#expired_dlg"));break;case 4010:document.getElementById("btn_verify_mobile4").innerHTML="<span id='time_mobile4'>60</span>S";document.getElementById("btn_verify_mobile4").className="btn_verify_unedit";document.getElementById("btn_verify_mobile4").setAttribute("onclick","");if(xh_mobile4!=null){clearTimeout(xh_mobile4)}hideDiv($("#safe_dlg2"));showDiv($("#timeout_dlg"));break;default:showinfo("info_safe_dlg2",c.resultMsg,1);break}return}document.getElementById("btn_verify_mobile4").innerHTML="<span id='time_mobile4'>60</span>S";document.getElementById("btn_verify_mobile4").className="btn_verify_unedit";document.getElementById("btn_verify_mobile4").setAttribute("onclick","");if(xh_mobile4!=null){clearTimeout(xh_mobile4)}hideDiv($("#safe_dlg2"));showDiv($("#safe_dlg3"))}})});$("#safe_dlg3 .login_button").click(function(){var c=$.trim($("#safepwd").val());var b=$.trim($("#resafepwd").val());if(c.length==0){showinfo("info_safepwd","请输入新密码",1);return false}if(b.length==0){showinfo("info_resafepwd","请再次输入新密码",1);return false}if(!c.match(isPasswordRegex)){showinfo("info_safepwd","密码格式错误",1);return false}if(!b.match(isPasswordRegex)){showinfo("info_resafepwd","密码格式错误",1);return false}if(c!=b){showinfo("info_resafepwd","新密码两次输入不一致",1);return false}var a='{"mobile" :"'+$("#new_phoneNum").html()+'","password":"'+$.md5(c)+'","confirmPassword":"'+$.md5(b)+'","requestKey":"'+$("#requestKey").val()+'","type":"1","style":"1"}';$.ajax({type:"POST",url:"../bind/bind",cache:false,contentType:"application/json; charset=utf-8",dataType:"json",data:a,beforeSend:function(){},success:function(e){var d=e.resultCode;if(d!=1001){switch(d){case 3009:hideDiv($("#safe_dlg3"));showDiv($("#expired_dlg"));break;case 4010:hideDiv($("#safe_dlg3"));showDiv($("#timeout_dlg"));break;default:showinfo("info_safe_dlg3",e.resultMsg,1);break}return}hideDiv($("#safe_dlg3"));showinfo("info_safe_dlg3","密码包含6-16位字母、数字",2);showToast($("#success_toast"),"已成功绑定安全信息")}})});